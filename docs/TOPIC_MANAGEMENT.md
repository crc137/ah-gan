# Управление темами

## Управление кодом

### `/codeaccess`
- **Описание**: Управление доступом к коду (глобально и по темам)
- **Доступ**: Только авторизованные администраторы
- **Использование**: `/codeaccess`

**Подробная инструкция:**
1. **Глобальное управление**: 
   - Кнопка "Enable Code Access" - разрешает код во всех темах
   - Кнопка "Disable Code Access" - запрещает код во всех темах

2. **Управление по темам**:
   - Если вы находитесь в теме, команда покажет статус для текущей темы
   - Можно настроить разные правила для разных тем
   - Тема может разрешать код даже если глобально он запрещен

3. **Логика работы**:
   - Код разрешен если: глобально включен ИЛИ тема явно разрешена
   - Приоритет: настройки темы > глобальные настройки

4. **Примеры использования**:
   - В общей теме: `/codeaccess` - управление глобально
   - В теме "Разработка": `/codeaccess` - управление для этой темы

### `/codeignore`
- **Описание**: Включить/выключить игнорирование сообщений с кодом
- **Доступ**: Только авторизованные администраторы
- **Использование**: `/codeignore`

**Подробная инструкция:**
1. **Назначение**: Управление обработкой сообщений с кодом

2. **Функция**: Переключает статус игнорирования кода

3. **Когда включено**:
   - Сообщения с кодом игнорируются
   - Код не блокируется и не модерируется

4. **Когда выключено**:
   - Сообщения с кодом обрабатываются
   - Применяются правила модерации для кода

### `/toggle_code`
- **Описание**: Включить/выключить обнаружение кода
- **Доступ**: Только авторизованные администраторы
- **Использование**: `/toggle_code`

**Подробная инструкция:**
1. **Назначение**: Переключение обнаружения кода в сообщениях

2. **Функция**: Переключает статус обнаружения кода

3. **Когда включено**:
   - Бот обнаруживает и обрабатывает сообщения с кодом
   - Применяются правила модерации для кода

4. **Когда выключено**:
   - Сообщения с кодом игнорируются
   - Код не блокируется и не модерируется

## Управление темами

### `/topicsettings`
- **Описание**: Показать детальные настройки тем для текущего чата
- **Доступ**: Только авторизованные администраторы
- **Использование**: `/topicsettings`

**Подробная инструкция:**
1. **Просмотр настроек**: Команда показывает:
   - Глобальные настройки чата (доступ к коду, ссылки, пересылки, кириллица)
   - Информацию о текущей теме (если вы находитесь в теме)
   - Список всех настроенных тем с их статусом

2. **Настройка тем**: Для настройки конкретной темы:
   - Перейдите в нужную тему
   - Используйте `/codeaccess` для управления доступом к коду в этой теме
   - Настройки применяются только к выбранной теме

3. **Структура тем**:
   - Каждая тема имеет уникальный ID
   - Можно настроить разные правила для разных тем
   - Глобальные настройки применяются ко всем темам по умолчанию

## Тестирование кода

### `/testcode`
- **Описание**: Проверить, будет ли сообщение обнаружено как код
- **Доступ**: Только авторизованные администраторы
- **Использование**: `/testcode [текст]` или ответ на сообщение

**Подробная инструкция:**
1. **Назначение**: Проверка, будет ли сообщение обнаружено как код

2. **Способы использования**:
   - `/testcode console.log("hello")` - тестирование текста
   - Ответ на сообщение с `/testcode` - тестирование сообщения

3. **Показывает**:
   - Результат обнаружения кода
   - Найденные паттерны кода
   - Статус обработки

4. **Примеры**:
   - `/testcode print("hello world")` - тест Python кода
   - `/testcode function test() { return true; }` - тест JavaScript
   - Ответ на сообщение с кодом

### `/test_code`
- **Описание**: Проверить обнаружение кода и валидацию ссылок
- **Доступ**: Только авторизованные администраторы
- **Использование**: `/test_code <текст>`

**Подробная инструкция:**
1. **Назначение**: Тестирование функций модерации (код и ссылки)

2. **Параметры**:
   - `<текст>` - текст для тестирования (обязательный)

3. **Показывает**:
   - Результат обнаружения кода
   - Найденные ссылки
   - Статус whitelist для ссылок
   - Ожидаемый результат модерации

4. **Примеры**:
   - `/test_code console.log("hello")` - тест кода
   - `/test_code https://github.com` - тест ссылки
   - `/test_code print("hello world")` - тест Python кода

### `/check_codeaccess`
- **Описание**: Проверить текущие настройки доступа к коду
- **Доступ**: Только авторизованные администраторы
- **Использование**: `/check_codeaccess`

**Подробная инструкция:**
1. **Назначение**: Проверка настроек доступа к коду

2. **Показывает**:
   - Глобальный статус доступа к коду
   - Статус для текущей темы (если применимо)
   - Список разрешенных тем

3. **Когда использовать**:
   - При проблемах с доступом к коду
   - Для проверки настроек тем
   - При отладке

## Практические примеры настройки

### Настройка темы для обсуждений
```bash
# 1. Перейти в тему "Обсуждения"
# 2. Настроить доступ к коду для этой темы
/codeaccess

# 3. Проверить настройки темы
/topicsettings
```

### Настройка темы для кода
```bash
# 1. Перейти в тему "Код"
# 2. Разрешить код в этой теме
/codeaccess

# 3. Разрешить полезные ссылки
/whitelist add github\.com
/whitelist add stackoverflow\.com
/whitelist add docs\.python\.org

# 4. Отключить анализ изображений в этой теме
/toggle_images
```
